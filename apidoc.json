{"openapi":"3.0.0","paths":{"/api/v1/auth/new":{"post":{"operationId":"AuthController_createNewUser","summary":"Creates a new user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequest"}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"Missing or invalid data"},"401":{"description":"Invalid token"},"403":{"description":"User already exists"},"409":{"description":"Unique constrain violation"}},"tags":["Signing and Authentication"]}},"/api/v1/auth/login":{"post":{"operationId":"AuthController_login","summary":"Sign in a user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserRequest"}}}},"responses":{"200":{"description":"User successfully signed in","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"User does not exist"},"401":{"description":"Invalid token or authority"}},"tags":["Signing and Authentication"]}},"/api/v1/auth/loginAsUser":{"post":{"operationId":"AuthController_loginAsUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserRequest"}}}},"responses":{"201":{"description":""}},"tags":["Signing and Authentication"]}},"/api/v1/user/{userId}":{"get":{"operationId":"UsersController_getUserById","summary":"Returns a user given its Id","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User with the given Id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to access this user data"},"404":{"description":"User not found"}},"tags":["Users"]},"put":{"operationId":"UsersController_updateUser","summary":"Updates user profile information","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}},"responses":{"200":{"description":"Data successfully updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatedUserProfile"}}}},"400":{"description":"User Id does not match"},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to access this user data"},"404":{"description":"User not found"}},"tags":["Users"]}},"/api/v1/user":{"post":{"operationId":"UsersController_createUser","summary":"Creates a user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequest"}}}},"responses":{"200":{"description":"Data successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to access this data"},"409":{"description":"Unique constraint violation"}},"tags":["Users"]}},"/api/v1/user/search":{"post":{"operationId":"UsersController_searchUsers","summary":"Search users","parameters":[{"name":"x-lang","in":"header","description":"Language code","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSearchRequest"}}}},"responses":{"200":{"description":"Search result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSearchResult"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to access this user data"}},"tags":["Users"]}},"/api/v1/user/{userId}/address":{"get":{"operationId":"UserAddressController_getAddy","summary":"Returns user's address","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}},{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User's address","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Address"}}}},"401":{"description":"Invalid token"}},"tags":["Users"]},"put":{"operationId":"UserAddressController_updateAddy","summary":"Updates user's address","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}},{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Address"}}}},"responses":{"200":{"description":"Address updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Address"}}}},"400":{"description":"Missing or invalid data"},"401":{"description":"Invalid token"}},"tags":["Users"]}},"/api/v1/permission":{"get":{"operationId":"PermissionController_getAllPermissions","summary":"Returns a list of all permissions","parameters":[],"responses":{"200":{"description":"List of all permissions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GlobalPermissionDetail"}}}}},"401":{"description":"Invalid token"}},"tags":["Roles and permissions"]}},"/api/v1/permission/role":{"get":{"operationId":"PermissionController_getAllRoles","summary":"Returns a list of all roles","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}}],"responses":{"200":{"description":"List of all roles","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GlobalRole"}}}}},"401":{"description":"Invalid token"}},"tags":["Roles and permissions"]}},"/api/v1/permission/category":{"get":{"operationId":"PermissionController_getAllCategories","summary":"Returns a list of all permission categories","parameters":[],"responses":{"200":{"description":"List of all permission categories","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GlobalPermissionCategory"}}}}},"401":{"description":"Invalid token"}},"tags":["Roles and permissions"]}},"/api/v1/permission/organization/role":{"get":{"operationId":"PermissionController_getAllOrgRoles","summary":"Returns a list of all organization-specific roles","parameters":[],"responses":{"200":{"description":"List of all roles that grant rights to users over organizations","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganizationRole"}}}}},"401":{"description":"Invalid token"}},"tags":["Roles and permissions"]}},"/api/v1/permission/organization":{"get":{"operationId":"PermissionController_getAllOrgPermissions","summary":"Returns a list of all organization-specific permissions","parameters":[],"responses":{"200":{"description":"List all permissions available to organizations members","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganizationPermissionDetail"}}}}},"401":{"description":"Invalid token"}},"tags":["Roles and permissions"]}},"/api/v1/organization/member":{"get":{"operationId":"OrganizationMemberController_getAllMembers","summary":"Returns all organization members","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}},{"name":"organizationId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Organization members","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganizationMember"}}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to access this user data"}},"tags":["Organization"]},"post":{"operationId":"OrganizationMemberController_createOrgMembership","summary":"Create an organization membership","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationMemberCreationRequest"}}}},"responses":{"200":{"description":"Data successfully created. Only id field in the returned object is valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationMember"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to access this data"},"404":{"description":"Organization or new member not found"},"409":{"description":"Unique constraint violation"}},"tags":["Organization"]}},"/api/v1/organization/voteSettings":{"get":{"operationId":"OrganizationVoteSettingsController_getVoteSetting","summary":"Returns the organization vote settings","parameters":[],"responses":{"200":{"description":"Organization vote settings","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationVoteSettings"}}}},"401":{"description":"Invalid token"},"403":{"description":"User does not have permission to access these settings"},"404":{"description":"Organization or settings not found"}},"tags":["Voting"]},"put":{"operationId":"OrganizationVoteSettingsController_updateVoteSetting","summary":"Updates the organization vote settings","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationVoteSettings"}}}},"responses":{"200":{"description":"Settings updated successfully"},"400":{"description":"organization id mismatch"},"401":{"description":"Invalid token"},"403":{"description":"User does not have permission to access these settings"},"404":{"description":"Organization or settings not found"},"422":{"description":"Invalid settings. Check the response text for more details"}},"tags":["Voting"]}},"/api/v1/country":{"get":{"operationId":"CountryController_getAllCountrys","summary":"Returns a list of all available countries","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}}],"responses":{"200":{"description":"List of all available countries","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CountryResponse"}}}}},"401":{"description":"Invalid token"}},"tags":["Countries"]}},"/api/v1/country/{country_id}/states":{"get":{"operationId":"StateController_getAllStates","summary":"Returns a list of the states/provinces/departments of a country","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}},{"name":"country_id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"List of the states of a country","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StateResponse"}}}}},"401":{"description":"Invalid token"}},"tags":["Countries"]}},"/api/v1/phone_type":{"get":{"operationId":"PhoneTypeController_getAllCountrys","summary":"Returns a list of all available phone types","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}}],"responses":{"200":{"description":"List of all available phone types","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PhoneTypeResponse"}}}}},"401":{"description":"Invalid token"}},"tags":["Phones"]}},"/api/v1/user/{userId}/phone":{"get":{"operationId":"PhoneUserController_getAllPhones","summary":"Returns a list of all user's phones","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}},{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"List of all user's phones","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Phone"}}}}},"401":{"description":"Invalid token"}},"tags":["Users"]},"post":{"operationId":"PhoneUserController_addPhone","summary":"Creates a new phone for the given user","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}},{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"'id' and 'phone_type.localized_name' fields will be ignored","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Phone"}}}},"responses":{"201":{"description":"Phone created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Phone"}}}},"400":{"description":"Missing or invalid data"},"401":{"description":"Invalid token"}},"tags":["Users"]}},"/api/v1/user/{userId}/phone/{phoneId}":{"put":{"operationId":"PhoneUserController_updatePhone","summary":"Updates an existing phone for the given user","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}},{"name":"userId","required":true,"in":"path","schema":{"type":"string"}},{"name":"phoneId","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Phone"}}}},"responses":{"200":{"description":"Phone updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Phone"}}}},"400":{"description":"Missing or invalid data"},"401":{"description":"Invalid token"}},"tags":["Users"]}},"/api/v1/voting":{"post":{"operationId":"VotingController_create","summary":"Create a new voting","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateVotingDto"}}}},"responses":{"200":{"description":"Voting created successfully"},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to create voting"}},"tags":["Voting"]},"get":{"operationId":"VotingController_findAll","summary":"Get all votings","parameters":[],"responses":{"200":{"description":"List of all votings","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VotingProfile"}}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to read the voting"}},"tags":["Voting"]},"put":{"operationId":"VotingController_updateVoting","summary":"Updates an existing Voting","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Voting"}}}},"responses":{"200":{"description":"Voting updated successfully"},"400":{"description":"Missing or invalid data"},"401":{"description":"Invalid token"}},"tags":["Voting"]}},"/api/v1/voting/{id}":{"get":{"operationId":"VotingController_findOne","summary":"Get a specific voting by id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Voting with the given ID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Voting"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to read the voting"},"404":{"description":"Voting not found"}},"tags":["Voting"]}},"/api/v1/voting/{votingid}/approval":{"post":{"operationId":"VotingApprovalController_create","summary":"Submits a new approval for the voting. It all the admin users approved it the voting status is changed to \"Active\"","parameters":[{"name":"votingid","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VotingApprovalRequest"}}}},"responses":{"200":{"description":"Approval created successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VotingApproval"}}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to approve the voting"}},"tags":["Voting"]}},"/api/v1/voting/{votingid}/vote":{"post":{"operationId":"VoteController_create","summary":"Submits a vote","parameters":[{"name":"votingid","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoteBallot"}}}},"responses":{"200":{"description":"Vote submitted successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VoteLogEntry"}}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to approve the voting"}},"tags":["Voting"]}},"/api/v1/numbers/payment/search":{"post":{"operationId":"MoneyController_searchPayment","summary":"Search payments for organization or users","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentSearchRequest"}}}},"responses":{"200":{"description":"Payments matching the criteria","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentSearchResult"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to access this payment data"}},"tags":["Numbers"]}},"/api/v1/numbers/income":{"post":{"operationId":"MoneyController_newIncome","summary":"New income into the platform","parameters":[{"name":"x-lang","required":true,"in":"header","description":"Language code","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewIncome"}}}},"responses":{"200":{"description":"Income registered"},"401":{"description":"Invalid token"},"403":{"description":"Insufficient right"}},"tags":["Numbers"]}},"/api/v1/numbers/payout/{payoutId}/pay":{"post":{"operationId":"MoneyController_payPayout","summary":"Send money to the user connected financial account","parameters":[{"name":"payoutId","required":true,"in":"path","schema":{"type":"string"}},{"name":"x-lang","in":"header","description":"Language code","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Payment completed"},"401":{"description":"Invalid token"},"403":{"description":"Insufficient rights to access this payment data"},"404":{"description":"Payment not found"},"409":{"description":"Recipient account not found"}},"tags":["Numbers"]}},"/api/v1/apidoc-json":{"get":{"tags":["Download OpenAPI JSON"],"description":"Download the OpenAPI JSON file description of the API","responses":{"200":{"description":"Successful response"}}}}},"info":{"title":"Savimbo Vote REST API Reference","description":"","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"CreateUserRequest":{"type":"object","properties":{"authenticationBy":{"type":"string","description":"Authentication system for the new user","example":"Google","enum":["EmailAndPassword","Google"]},"legalFirstName":{"type":"string","description":"User first name","example":"Joan"},"legalLastName":{"type":"string","description":"User Last name","example":"Smith"},"email":{"type":"string","description":"User e-mail","example":"joan.smith@mail.com"},"lang":{"type":"string","description":"User preferred language (ISO 639-3)","example":"spa"},"password":{"type":"string","description":"User password for authentication using email and password","example":""},"token":{"type":"string","description":"Token provided by the authentication authority","example":"ya29.a0AfH6SMDD4h6PvCf3xxUdMlOeJp7FybPq77fZt5GLi"}},"required":["authenticationBy","legalFirstName","legalLastName","email","lang"]},"UserProfileSummary":{"type":"object","properties":{"id":{"type":"string","description":"User id","example":"7uirwyWXdMz6"},"email":{"type":"string","description":"User email","example":"Joan@mail.com"},"name_legal_first":{"type":"string","description":"User first legal name","example":"Joan"},"name_legal_last":{"type":"string","description":"User last legal name","example":"Smith"},"name_display_first":{"type":"string","description":"User first name to display","example":"Joannie"},"name_display_last":{"type":"string","description":"User last name to display","example":"Smith"},"icon_url":{"type":"string","description":"User profile icon URL"}},"required":["id","email","name_legal_first","name_legal_last"]},"OrganizationRole":{"type":"object","properties":{"id":{"type":"string","description":"Role Id","example":"38XmZWFa6sVk"},"name":{"type":"string","description":"Role name","example":"Member"},"description1":{"type":"string","description":"Role description"},"description2":{"type":"string","description":"Role description"},"permissions":{"description":"Organization permissions granted to this role","type":"array","items":{"type":"string"}}},"required":["id","name","description1","description2","permissions"]},"OrganizationMembership":{"type":"object","properties":{"roles":{"description":"User roles for the organization","type":"array","items":{"$ref":"#/components/schemas/OrganizationRole"}}},"required":["roles"]},"LoginResponse":{"type":"object","properties":{"access_token":{"type":"string","description":"Token to authenticate the user","example":"eyJhbGciOiJIUzI1NiIsI.eyJ1c2VyX2Vt"},"user":{"description":"User profile information","allOf":[{"$ref":"#/components/schemas/UserProfileSummary"}]},"permissions":{"description":"User global permissions","example":["user_profile.modify"],"type":"array","items":{"type":"string"}},"membership":{"description":"User membership","type":"array","items":{"$ref":"#/components/schemas/OrganizationMembership"}}},"required":["access_token","user","permissions","membership"]},"LoginUserRequest":{"type":"object","properties":{"authenticationBy":{"type":"string","description":"Authentication system for the new user","example":"Google","enum":["EmailAndPassword","Google"]},"email":{"type":"string","description":"User e-mail","example":"joan.smith@mail.com"},"password":{"type":"string","description":"User password for authentication using email and password","example":""},"token":{"type":"string","description":"Token provided by the authentication authority","example":"ya29.a0AfH6SMDD4h6PvCf3xxUdMlOeJp7FybPq77fZt5GLi"}},"required":["authenticationBy","email"]},"UserProfile":{"type":"object","properties":{"id":{"type":"string","description":"User id","example":"7uirwyWXdMz6"},"email":{"type":"string","description":"User email","example":"Joan@mail.com"},"name_legal_first":{"type":"string","description":"User first legal name","example":"Joan"},"name_legal_last":{"type":"string","description":"User last legal name","example":"Smith"},"name_display_first":{"type":"string","description":"User first name to display","example":"Joannie"},"name_display_last":{"type":"string","description":"User last name to display","example":"Smith"},"icon_url":{"type":"string","description":"User profile icon URL"}},"required":["id","email","name_legal_first","name_legal_last"]},"UpdatedUserProfile":{"type":"object","properties":{"userProfile":{"description":"Updated user profile data","allOf":[{"$ref":"#/components/schemas/UserProfile"}]},"access_token":{"type":"string","description":"New token to authenticate the user or empty if the token has not changed","example":"eyJhbGciOiJIUzI1NiIsI.eyJ1c2VyX2Vt"}},"required":["userProfile","access_token"]},"UserSearchParameters":{"type":"object","properties":{}},"UserSearchFilters":{"type":"object","properties":{}},"UserSearchPagination":{"type":"object","properties":{"page":{"type":"number","description":"Page number. Valid range: 1 - n","example":1},"per_page":{"type":"number","description":"Number of items per page","example":10}},"required":["page","per_page"]},"UserSearchOrderBy":{"type":"object","properties":{"field":{"type":"string","description":"Field to order by. Default: user account creation date","enum":["created_at","name_display_last","name_legal_last","email"]},"ascendent":{"type":"boolean","description":"ascendent (true) or descendent (false) order"}},"required":["field","ascendent"]},"UserSearchRequest":{"type":"object","properties":{"parameters":{"description":"Search parameters","allOf":[{"$ref":"#/components/schemas/UserSearchParameters"}]},"filters":{"description":"Search filters","allOf":[{"$ref":"#/components/schemas/UserSearchFilters"}]},"pagination":{"description":"Search pagination","allOf":[{"$ref":"#/components/schemas/UserSearchPagination"}]},"order":{"description":"Search order","allOf":[{"$ref":"#/components/schemas/UserSearchOrderBy"}]}}},"StateResponse":{"type":"object","properties":{"code":{"type":"string","description":"State code","example":"CO-PUT"},"code_subdivision":{"type":"string","description":"State subdivision","example":"PUT"},"localized_name":{"type":"string","description":"The name of the state in the user language","example":"Putumayo"}},"required":["code","code_subdivision","localized_name"]},"CountryResponse":{"type":"object","properties":{"code_alpha3":{"type":"string","description":"ISO 3166 Alpha3 country code","example":"COL"},"national_flag_char":{"type":"string","description":"Unicode representation of the national flag","example":"🇨🇴"},"localized_name":{"type":"string","description":"The name of the country in the user language","example":"Colombia"},"calling_code":{"description":"International dialing code","example":["CO+57"],"type":"array","items":{"type":"string"}}},"required":["code_alpha3","national_flag_char","localized_name","calling_code"]},"Address":{"type":"object","properties":{"id":{"type":"number","description":"The unique identifier of the address","example":211},"formatted_address":{"type":"string","description":"","example":""},"fuzzy_address":{"type":"string","description":"","example":""},"street":{"type":"string","description":"","example":""},"extended":{"type":"string","description":"","example":""},"city":{"type":"string","description":"","example":""},"postal_code":{"type":"string","description":"","example":""},"state_code":{"type":"string","description":"","example":""},"country_code":{"type":"string","description":"","example":""},"google_place_id":{"type":"string","description":"","example":""},"google_place_type":{"type":"string","description":"","example":""},"google_plus_code":{"type":"string","description":"","example":""},"state":{"description":"","allOf":[{"$ref":"#/components/schemas/StateResponse"}]},"country":{"description":"","allOf":[{"$ref":"#/components/schemas/CountryResponse"}]}},"required":["id"]},"LocalizedUniversalStatus":{"type":"object","properties":{"id":{"type":"number","description":"The status id","example":"2"},"localized_name":{"type":"string","description":"The name of the status in the user language","example":"Active"}},"required":["id","localized_name"]},"UserSearchResultItem":{"type":"object","properties":{"id":{"type":"string","description":"User id","example":217},"email":{"type":"string","description":"User email","example":"joan@savimbo.com"},"name_legal_first":{"type":"string","description":"User first legal name","example":"Joan"},"name_legal_last":{"type":"string","description":"User last legal name","example":"Smith"},"name_display_first":{"type":"string","description":"User first name to display","example":"Joannie"},"name_display_last":{"type":"string","description":"User last name to display","example":"Smith"},"createdAt":{"format":"date-time","type":"string","description":"User account creation date","example":"2021-01-01T00:00:00.000Z"},"flagged":{"type":"boolean","description":"Flagged by staff"},"icon_url":{"type":"string","description":"User profile icon URL"},"address":{"description":"User address","allOf":[{"$ref":"#/components/schemas/Address"}]},"status":{"description":"User account status","allOf":[{"$ref":"#/components/schemas/LocalizedUniversalStatus"}]}},"required":["id","email","name_legal_first","name_legal_last","name_display_first","name_display_last","createdAt","flagged","icon_url","address","status"]},"UserSearchResult":{"type":"object","properties":{"users":{"description":"Users found","allOf":[{"$ref":"#/components/schemas/UserSearchResultItem"}]},"total":{"type":"number","description":"Total number of users found","example":23}},"required":["users","total"]},"GlobalPermissionDetail":{"type":"object","properties":{"id":{"type":"number","description":"Permission Id","example":17},"text_id":{"type":"string","description":"Permission unique string","example":"user_profile.view"},"category_id":{"type":"number","description":"Permission category","example":2},"scope":{"type":"string","description":"Description","example":"Can view user profiles"}},"required":["id","text_id","category_id","scope"]},"GlobalRole":{"type":"object","properties":{"id":{"type":"string","description":"Role Id","example":"8AQmog8VTjnt"},"name":{"type":"string","description":"Role name","example":"Senior staff"},"description1":{"type":"string","description":"Role description"},"description2":{"type":"string","description":"Role description"},"permissions":{"description":"Permissions granted to this role","type":"array","items":{"type":"number"}}},"required":["id","name","description1","description2","permissions"]},"GlobalPermissionCategory":{"type":"object","properties":{"id":{"type":"number","description":"Permission Category Id","example":2},"description":{"type":"string","description":"Description","example":"User"}},"required":["id","description"]},"OrganizationPermissionDetail":{"type":"object","properties":{"id":{"type":"number","description":"Permission Id","example":17},"text_id":{"type":"string","description":"Permission unique string","example":"ent.organization.member"},"scope":{"type":"string","description":"Description","example":"Can view organization data"}},"required":["id","text_id","scope"]},"LegalEntity":{"type":"object","properties":{"id":{"type":"string","description":"Legal entity id","example":"8kfe3SvT"},"uid":{"type":"string","description":"Legal entity guid. Read-only"},"personality":{"type":"string","description":"Peronality: user or organization","example":"user"},"person":{"description":"Natural person data","allOf":[{"$ref":"#/components/schemas/UserProfileSummary"}]},"status":{"description":"Legal entity account status","allOf":[{"$ref":"#/components/schemas/LocalizedUniversalStatus"}]}},"required":["id","personality","person","status"]},"OrganizationMember":{"type":"object","properties":{"id":{"type":"string","description":"Membership id","example":"8kfe3SvT"},"legalEntity":{"description":"Member profile","allOf":[{"$ref":"#/components/schemas/LegalEntity"}]},"roles":{"description":"Member roles","type":"array","items":{"$ref":"#/components/schemas/OrganizationRole"}}},"required":["id","legalEntity","roles"]},"OrganizationMemberCreationRequest":{"type":"object","properties":{"id":{"type":"string","description":"New member id","example":"8kfe3SvT"},"roles":{"description":"New member role ids","example":["n9fe3TVsq","wk6e3aUp"],"type":"array","items":{"type":"string"}}},"required":["id","roles"]},"OrganizationVoteSettings":{"type":"object","properties":{"split_invest_pctg":{"type":"number","description":"% group payments that is put into delayed payment for the group","example":"30"},"split_group_pctg":{"type":"number","description":"% of group payments that go into the KAPITAL voting algorithm","example":"40"},"split_direct_pctg":{"type":"number","description":"% of group payments that is evenly distributed into direct payments for all member accounts linked to the organization","example":"30"},"delay_invest":{"type":"number","description":"# of years invest payments are delayed before being sent out","example":"5"},"vote_quorum_pctg":{"type":"number","description":"% of org members that are required to pass a valid vote (quorum)","example":"90"},"superadmin_quorum_pctg":{"type":"number","description":"% of superadmins required to submit a vote, and move it from the Review status to the Active status","example":"66"},"delay_vote_days":{"type":"number","description":"# days that a vote is in Active status. If a vote does not a receive votes > vote_quorum then it automatically reverts to status Hold","example":"14"},"delay_cycle_months":{"type":"number","description":"# months after a voting window before a new vote can become active. ","example":"12"}},"required":["split_invest_pctg","split_group_pctg","split_direct_pctg","delay_invest","vote_quorum_pctg","superadmin_quorum_pctg","delay_vote_days","delay_cycle_months"]},"PhoneTypeResponse":{"type":"object","properties":{"uid":{"type":"string","description":"The unique label of the phone type","example":"cell"},"localized_name":{"type":"string","description":"The name of the phone type in the user language","example":"Móvil"}},"required":["uid"]},"Phone":{"type":"object","properties":{"id":{"type":"number","description":"The unique identifier of the phone","example":211},"number":{"type":"string","description":"Local number of the phone","example":"666555222"},"number_as_entered":{"type":"string","description":"Local number in the format received by the service","example":"666 555 222"},"extension":{"type":"string","description":"Extension","example":"12"},"country_calling_code":{"type":"string","description":"International dialing code","example":"ES+34"},"phone_type":{"description":"Type of phone number","allOf":[{"$ref":"#/components/schemas/PhoneTypeResponse"}]}},"required":["id","number","country_calling_code","phone_type"]},"ItemVoting":{"type":"object","properties":{"id":{"type":"number","description":"The unique identifier of the item","example":1},"vendor":{"type":"string","description":"Pepe","example":"VendorName"},"description":{"type":"string","description":"Raw materials shipment","example":"Item description"},"amount":{"type":"number","description":"600","example":100},"rate":{"type":"number","description":"300","example":10},"quantity":{"type":"number","description":"2","example":5}},"required":["id","vendor","description","amount","rate","quantity"]},"CreateVotingDto":{"type":"object","properties":{"name_voting":{"type":"string","description":"Name of the voting","example":"Repair bridge"},"description_voting":{"type":"string","description":"Description of the voting","example":"Repair the bridge railings that are damaged"},"note_voting":{"type":"string","description":"Optional note","nullable":true},"items":{"description":"List of items related to this voting","nullable":true,"type":"array","items":{"$ref":"#/components/schemas/ItemVoting"}}},"required":["name_voting","description_voting","note_voting","items"]},"VotingOptionResult":{"type":"object","properties":{"total_votes":{"type":"number","description":"Total votes for this option"},"percentage":{"type":"number","description":"Percentage for this option"}},"required":["total_votes","percentage"]},"VotingResults":{"type":"object","properties":{"yes":{"description":"Results for yes","allOf":[{"$ref":"#/components/schemas/VotingOptionResult"}]},"no":{"description":"Results for no","allOf":[{"$ref":"#/components/schemas/VotingOptionResult"}]},"abstain":{"description":"Results for abstain","allOf":[{"$ref":"#/components/schemas/VotingOptionResult"}]},"not_voted":{"description":"Number of users that have not voted","allOf":[{"$ref":"#/components/schemas/VotingOptionResult"}]},"quorum":{"description":"Total number of submitted votes for the voting is valid","allOf":[{"$ref":"#/components/schemas/VotingOptionResult"}]},"total_members":{"type":"number","description":"Total number of members"}},"required":["yes","no","abstain","not_voted","quorum","total_members"]},"VotingProfile":{"type":"object","properties":{"id":{"type":"string","description":"voting id"},"name_voting":{"type":"string","description":"Name of the voting","example":"Repair bridge"},"description_voting":{"type":"string","description":"Description of the voting","example":"Repair the bridge railings that are damaged"},"status":{"type":"number","description":"Optional note","nullable":true},"results":{"description":"Results of the voting","allOf":[{"$ref":"#/components/schemas/VotingResults"}]},"creator":{"description":"","allOf":[{"$ref":"#/components/schemas/UserProfileSummary"}]},"approvals":{"description":"","type":"array","items":{"type":"string"}},"closed_at":{"format":"date-time","type":"string","description":""},"closed_due_at":{"format":"date-time","type":"string","description":""},"final_result":{"type":"number","description":""}},"required":["id","name_voting","description_voting","status","results","creator","approvals","closed_at","closed_due_at","final_result"]},"VotingApproval":{"type":"object","properties":{"user":{"description":"User who approved the voting","allOf":[{"$ref":"#/components/schemas/UserProfileSummary"}]},"approved":{"type":"number","description":"Approve or revoke approval of the voting"},"created_at":{"format":"date-time","type":"string","description":"Date when the voting was approved. It can be null if the approval has not been issued yet"}},"required":["user","approved","created_at"]},"VoteLogEntry":{"type":"object","properties":{"vote":{"type":"number","description":"Vote","enum":[1,2,3]},"created_at":{"format":"date-time","type":"string","description":"Date when the vote was submitted"}},"required":["vote","created_at"]},"Voting":{"type":"object","properties":{"id":{"type":"string","description":"voting id"},"name_voting":{"type":"string","description":"Name of the voting","example":"Repair bridge"},"description_voting":{"type":"string","description":"Description of the voting","example":"Repair the bridge railings that are damaged"},"note_voting":{"type":"string","description":"Optional note","nullable":true},"items":{"description":"List of items related to this voting","type":"array","items":{"$ref":"#/components/schemas/ItemVoting"}},"status":{"type":"number","description":"Voting status","enum":[1,2,3,4,5,6,7,8,9]},"creator":{"type":"number","description":"Vote creator. Read-only","enum":[1,2,3,4,5,6,7,8,9]},"created_at":{"format":"date-time","type":"string","description":"Date of the voting activation"},"approvals":{"description":"Approvals for the voting","type":"array","items":{"$ref":"#/components/schemas/VotingApproval"}},"calling_user_votes":{"description":"Votes submitted by the calling user to this voting","type":"array","items":{"$ref":"#/components/schemas/VoteLogEntry"}},"results":{"description":"Results of the voting","allOf":[{"$ref":"#/components/schemas/VotingResults"}]},"active_at":{"format":"date-time","type":"string","description":"Date of the voting activation"},"closed_at":{"format":"date-time","type":"string","description":"Date of the voting closing"},"final_result":{"type":"number","description":"Voting result"}},"required":["id","name_voting","description_voting","note_voting","items","status","creator","created_at","approvals","calling_user_votes","results","active_at","closed_at","final_result"]},"VotingApprovalRequest":{"type":"object","properties":{"approved":{"type":"number","description":"Approve or revoke approval of the voting"}},"required":["approved"]},"VoteBallot":{"type":"object","properties":{"vote":{"type":"number","description":"Submitted vote"}},"required":["vote"]},"PaymentSearchParameters":{"type":"object","properties":{"beneficiaryId":{"type":"string","description":"Id of the user or null for all payments","example":"8xTJiGaaU243"}},"required":["beneficiaryId"]},"PaymentSearchFilters":{"type":"object","properties":{}},"PaymentSearchPagination":{"type":"object","properties":{"page":{"type":"number","description":"Page number. Valid range: 1 - n","example":1},"per_page":{"type":"number","description":"Number of items per page","example":10}},"required":["page","per_page"]},"PaymentSearchOrderBy":{"type":"object","properties":{"field":{"type":"string","description":"Field to order by. Default: Payment account creation date","enum":["created_at","due_at","amount"]},"ascendent":{"type":"boolean","description":"ascendent (true) or descendent (false) order"}},"required":["field","ascendent"]},"PaymentSearchRequest":{"type":"object","properties":{"parameters":{"description":"Search parameters","allOf":[{"$ref":"#/components/schemas/PaymentSearchParameters"}]},"filters":{"description":"Search filters","allOf":[{"$ref":"#/components/schemas/PaymentSearchFilters"}]},"pagination":{"description":"Search pagination","allOf":[{"$ref":"#/components/schemas/PaymentSearchPagination"}]},"order":{"description":"Search order","allOf":[{"$ref":"#/components/schemas/PaymentSearchOrderBy"}]}}},"PaymentSearchResultItem":{"type":"object","properties":{"id":{"type":"string","description":"Payment id","example":"9EuJiGa552h6"},"amount":{"type":"string","description":"Payment amount","example":"52.15"},"currency":{"type":"string","description":"Payment currency (ISO 4217 code)","example":"USD"},"createdAt":{"format":"date-time","type":"string","description":"Payment account creation date","example":"2021-01-01T00:00:00.000Z"},"dueAt":{"format":"date-time","type":"string","description":"Payment account due date","example":"2021-01-01T00:00:00.000Z"},"completedAt":{"format":"date-time","type":"string","description":"Payment account completion date","example":"2021-01-01T00:00:00.000Z"},"status":{"description":"Payment status","allOf":[{"$ref":"#/components/schemas/LocalizedUniversalStatus"}]},"user":{"description":"User who received the payment or null","allOf":[{"$ref":"#/components/schemas/UserProfileSummary"}]},"disburser_id":{"type":"string","description":"Id of the entity that made the payment or null","example":"9EuJiGa552h6"},"description":{"type":"string","description":"Payment description"},"payout_id":{"type":"string","description":"Payout operation associated to this payment","example":"9EuJiGa552h6"}},"required":["id","amount","currency","createdAt","dueAt","completedAt","status","user","disburser_id","description","payout_id"]},"PaymentSearchResult":{"type":"object","properties":{"payments":{"description":"Payments found","allOf":[{"$ref":"#/components/schemas/PaymentSearchResultItem"}]},"total":{"type":"number","description":"Total number of payments found","example":23}},"required":["payments","total"]},"NewIncome":{"type":"object","properties":{"recipientId":{"type":"string","description":"Recipient legal entity id","example":"9EuJiGa552h6"},"amount":{"type":"string","description":"Amount","example":"52.15"},"currency":{"type":"string","description":"Currency (ISO 4217 code)","example":"USD"},"description":{"type":"string","description":"Description","example":"Payment for services rendered"}},"required":["recipientId","amount","currency","description"]}}}}